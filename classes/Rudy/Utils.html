<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Rudy::Utils [Rudy: Not your grandparents' EC2 deployment tool.]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          Rudy::Utils
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/rudy/utils_rb.html">lib/rudy/utils.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            A motley collection of methods that <a href="../Rudy.html">Rudy</a> loves
            to call!
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000458">banner</a></li>
              <li><a href="#M000451">bell</a></li>
              <li><a href="#M000452">bug</a></li>
              <li><a href="#M000461">capture</a></li>
              <li><a href="#M000447">external_ip_address</a></li>
              <li><a href="#M000449">generate_tag</a></li>
              <li><a href="#M000454">id_type</a></li>
              <li><a href="#M000456">identifier</a></li>
              <li><a href="#M000448">internal_ip_address</a></li>
              <li><a href="#M000453">is_id?</a></li>
              <li><a href="#M000455">known_type?</a></li>
              <li><a href="#M000457">noid</a></li>
              <li><a href="#M000459">require_glob</a></li>
              <li><a href="#M000465">scp_command</a></li>
              <li><a href="#M000460">service_available?</a></li>
              <li><a href="#M000463">strand</a></li>
              <li><a href="#M000450">waiter</a></li>
              <li><a href="#M000464">without_indent</a></li>
              <li><a href="#M000462">write_to_file</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>Socket::Constants</li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='class-list'>
              <h2>Classes and Modules</h2>
              Module <a href="Utils/RSSReader.html" class="link">Rudy::Utils::RSSReader</a><br />
            </div>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000458'>
                <a name='M000458'>      </a>
                <div class='synopsis'>
                  <span class='name'>banner</span>
                  <span class='arguments'>(msg, size = :normal, colour = :black)</span>
                </div>
                <div class='description'>
                  <p>
                  <tt>msg</tt> The message to return as a banner <tt>size</tt> One of:
                  :normal (default), :huge <tt>colour</tt> a valid Returns a string with
                  styling applying
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000458-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000458-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 172</span>&#x000A;172:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">banner</span>(<span class="ruby-identifier">msg</span>, <span class="ruby-identifier">size</span> = <span class="ruby-identifier">:normal</span>, <span class="ruby-identifier">colour</span> = <span class="ruby-identifier">:black</span>)&#x000A;173:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">msg</span>&#x000A;174:       <span class="ruby-identifier">banners</span> = {&#x000A;175:         <span class="ruby-identifier">:huge</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">without_indent</span>(<span class="ruby-value str">%Q(&#x000A;176:         =======================================================&#x000A;177:         =======================================================&#x000A;178:         !!!!!!!!!   %s   !!!!!!!!!&#x000A;179:         =======================================================&#x000A;180:         =======================================================)</span>),&#x000A;181:         <span class="ruby-identifier">:normal</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">%Q(============  %s  ============)</span>&#x000A;182:       }&#x000A;183:       <span class="ruby-identifier">size</span> = <span class="ruby-identifier">:normal</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">banners</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">size</span>)&#x000A;184:       <span class="ruby-comment cmt">#colour = :black unless Drydock::Console.valid_colour?(colour)</span>&#x000A;185:       <span class="ruby-identifier">size</span>, <span class="ruby-identifier">colour</span> = <span class="ruby-identifier">size</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-identifier">colour</span>.<span class="ruby-identifier">to_sym</span>&#x000A;186:       <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">banners</span>[<span class="ruby-identifier">size</span>], <span class="ruby-identifier">msg</span>).<span class="ruby-identifier">bright</span>.<span class="ruby-identifier">att</span>(<span class="ruby-identifier">:reverse</span>)&#x000A;187:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000451'>
                <a name='M000451'>      </a>
                <div class='synopsis'>
                  <span class='name'>bell</span>
                  <span class='arguments'>(chimes=1, logger=nil)</span>
                </div>
                <div class='description'>
                  <p>
                  Make a terminal bell chime
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000451-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000451-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 112</span>&#x000A;112:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bell</span>(<span class="ruby-identifier">chimes</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">logger</span>=<span class="ruby-keyword kw">nil</span>)&#x000A;113:       <span class="ruby-identifier">chimes</span> <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>&#x000A;114:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">logger</span>&#x000A;115:       <span class="ruby-identifier">chimed</span> = <span class="ruby-identifier">chimes</span>.<span class="ruby-identifier">to_i</span>&#x000A;116:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\a&quot;</span><span class="ruby-operator">*</span><span class="ruby-identifier">chimes</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">chimes</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>&#x000A;117:       <span class="ruby-keyword kw">true</span> <span class="ruby-comment cmt"># be like Rudy.bug()</span>&#x000A;118:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000452'>
                <a name='M000452'>      </a>
                <div class='synopsis'>
                  <span class='name'>bug</span>
                  <span class='arguments'>(bugid, logger=STDERR)</span>
                </div>
                <div class='description'>
                  <p>
                  Have you seen that episode of The Cosby Show where Dizzy Gillespie&#8230;
                  ah nevermind.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000452-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000452-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 121</span>&#x000A;121:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bug</span>(<span class="ruby-identifier">bugid</span>, <span class="ruby-identifier">logger</span>=<span class="ruby-constant">STDERR</span>)&#x000A;122:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;You have found a bug! If you want, you can email&quot;</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>)&#x000A;123:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">'rudy@solutious.com'</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>).<span class="ruby-identifier">bright</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; about it. It's bug ##{bugid}.&quot;</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>)          &#x000A;124:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Continuing...&quot;</span>.<span class="ruby-identifier">color</span>(<span class="ruby-identifier">:red</span>)&#x000A;125:       <span class="ruby-keyword kw">true</span> <span class="ruby-comment cmt"># so we can string it together like: bug('1') &amp;&amp; next if ...</span>&#x000A;126:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000461'>
                <a name='M000461'>      </a>
                <div class='synopsis'>
                  <span class='name'>capture</span>
                  <span class='arguments'>(stream) {|| ...}</span>
                </div>
                <div class='description'>
                  <p>
                  Capture STDOUT or STDERR to prevent it from being printed.
                  </p>
                  <pre>capture(:stdout) do&#x000A;  ...&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000461-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000461-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 237</span>&#x000A;237:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">capture</span>(<span class="ruby-identifier">stream</span>)&#x000A;238:       <span class="ruby-comment cmt">#raise &quot;We can only capture STDOUT or STDERR&quot; unless stream == :stdout || stream == :stderr</span>&#x000A;239:       <span class="ruby-keyword kw">begin</span>&#x000A;240:         <span class="ruby-identifier">stream</span> = <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">to_s</span>&#x000A;241:         <span class="ruby-identifier">eval</span> <span class="ruby-node">&quot;$#{stream} = StringIO.new&quot;</span>&#x000A;242:         <span class="ruby-keyword kw">yield</span>&#x000A;243:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;$#{stream}&quot;</span>).<span class="ruby-identifier">read</span>&#x000A;244:       <span class="ruby-keyword kw">ensure</span>&#x000A;245:         <span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;$#{stream} = #{stream.upcase}&quot;</span>)&#x000A;246:       <span class="ruby-keyword kw">end</span>&#x000A;247: &#x000A;248:       <span class="ruby-identifier">result</span>&#x000A;249:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000447'>
                <a name='M000447'>      </a>
                <div class='synopsis'>
                  <span class='name'>external_ip_address</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the external IP address (the one seen by the internet)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000447-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000447-source'>    <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 17</span>&#x000A;17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">external_ip_address</span>&#x000A;18:       <span class="ruby-identifier">ip</span> = <span class="ruby-keyword kw">nil</span>&#x000A;19:       <span class="ruby-keyword kw">begin</span>&#x000A;20:         <span class="ruby-node">%w{solutious.com/ip/ myip.dk/ whatismyip.com }</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sponge</span><span class="ruby-operator">|</span> <span class="ruby-comment cmt"># w/ backup</span>&#x000A;21:           <span class="ruby-identifier">ipstr</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP</span>.<span class="ruby-identifier">get</span>(<span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-node">&quot;http://#{sponge}&quot;</span>)) <span class="ruby-operator">||</span> <span class="ruby-value str">''</span>&#x000A;22:           <span class="ruby-identifier">ip</span> = <span class="ruby-regexp re">/([0-9]{1,3}\.){3}[0-9]{1,3}/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">ipstr</span>).<span class="ruby-identifier">to_s</span>&#x000A;23:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ip</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">ip</span>.<span class="ruby-identifier">empty?</span>&#x000A;24:         <span class="ruby-keyword kw">end</span>&#x000A;25:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SocketError</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ETIMEDOUT</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;26:         <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Connection Error. Check your internets!&quot;</span>&#x000A;27:       <span class="ruby-keyword kw">end</span>&#x000A;28:       <span class="ruby-identifier">ip</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;/32&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ip</span>&#x000A;29:       <span class="ruby-identifier">ip</span>&#x000A;30:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000449'>
                <a name='M000449'>      </a>
                <div class='synopsis'>
                  <span class='name'>generate_tag</span>
                  <span class='arguments'>(revision=1)</span>
                </div>
                <div class='description'>
                  <p>
                  Generates a canonical tag name in the form:
                  </p>
                  <pre>rudy-2009-12-31-01</pre>
                  <p>
                  where r1 refers to the revision number that day
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000449-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000449-source'>    <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 48</span>&#x000A;48:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_tag</span>(<span class="ruby-identifier">revision</span>=<span class="ruby-value">1</span>)&#x000A;49:       <span class="ruby-identifier">n</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">now</span>&#x000A;50:       <span class="ruby-identifier">y</span> = <span class="ruby-identifier">n</span>.<span class="ruby-identifier">year</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">&quot;20&quot;</span>)&#x000A;51:       <span class="ruby-identifier">m</span> = <span class="ruby-identifier">n</span>.<span class="ruby-identifier">month</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">&quot;0&quot;</span>)&#x000A;52:       <span class="ruby-identifier">d</span> = <span class="ruby-identifier">n</span>.<span class="ruby-identifier">mday</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">&quot;0&quot;</span>)&#x000A;53:       <span class="ruby-value str">&quot;rudy-%4s-%2s-%2s-r%s&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">revision</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">&quot;0&quot;</span>)] &#x000A;54:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000454'>
                <a name='M000454'>      </a>
                <div class='synopsis'>
                  <span class='name'>id_type</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the object type associated to <tt>str</tt> or nil if unknown.
                  </p>
                  <ul>
                  <li><tt>str</tt> is a string you&#8217;re investigating
                  
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000454-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000454-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 140</span>&#x000A;140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id_type</span>(<span class="ruby-identifier">str</span>)&#x000A;141:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">str</span>&#x000A;142:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>&#x000A;143:       (<span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'-'</span>).<span class="ruby-identifier">first</span> } <span class="ruby-operator">||</span> []).<span class="ruby-identifier">first</span>&#x000A;144:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000456'>
                <a name='M000456'>      </a>
                <div class='synopsis'>
                  <span class='name'>identifier</span>
                  <span class='arguments'>(key)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the string identifier associated to this <tt>key</tt>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000456-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000456-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 154</span>&#x000A;154:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">identifier</span>(<span class="ruby-identifier">key</span>)&#x000A;155:       <span class="ruby-identifier">key</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_sym</span>&#x000A;156:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)&#x000A;157:       <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>[<span class="ruby-identifier">key</span>]&#x000A;158:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000448'>
                <a name='M000448'>      </a>
                <div class='synopsis'>
                  <span class='name'>internal_ip_address</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Return the local IP address which receives external traffic from: <a
                  href="http://coderrr.wordpress.com/2008/05/28/get-your-local-ip-address">coderrr.wordpress.com/2008/05/28/get-your-local-ip-address</a>/
                  NOTE: This <em>does not</em> open a connection to the IP address.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000448-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000448-source'>    <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 35</span>&#x000A;35:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">internal_ip_address</span>&#x000A;36:       <span class="ruby-comment cmt"># turn off reverse DNS resolution temporarily </span>&#x000A;37:       <span class="ruby-identifier">orig</span>, <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span>, <span class="ruby-keyword kw">true</span>   &#x000A;38:       <span class="ruby-identifier">ip</span> = <span class="ruby-constant">UDPSocket</span>.<span class="ruby-identifier">open</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-value str">'75.101.137.7'</span>, <span class="ruby-value">1</span>); <span class="ruby-identifier">s</span>.<span class="ruby-identifier">addr</span>.<span class="ruby-identifier">last</span> } <span class="ruby-comment cmt"># Solutious IP</span>&#x000A;39:       <span class="ruby-identifier">ip</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;/24&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ip</span>&#x000A;40:       <span class="ruby-identifier">ip</span>&#x000A;41:     <span class="ruby-keyword kw">ensure</span>  &#x000A;42:       <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">do_not_reverse_lookup</span> = <span class="ruby-identifier">orig</span>&#x000A;43:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000453'>
                <a name='M000453'>      </a>
                <div class='synopsis'>
                  <span class='name'>is_id?</span>
                  <span class='arguments'>(identifier, str)</span>
                </div>
                <div class='description'>
                  <p>
                  Is the given string <tt>str</tt> an ID of type <tt>identifier</tt>?
                  </p>
                  <ul>
                  <li><tt>identifier</tt> is expected to be a key from ID_MAP
                  
                  </li>
                  <li><tt>str</tt> is a string you&#8217;re investigating
                  
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000453-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000453-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 131</span>&#x000A;131:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_id?</span>(<span class="ruby-identifier">identifier</span>, <span class="ruby-identifier">str</span>)&#x000A;132:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">identifier</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">known_type?</span>(<span class="ruby-identifier">identifier</span>)&#x000A;133:       <span class="ruby-identifier">identifier</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">identifier</span>.<span class="ruby-identifier">to_sym</span>&#x000A;134:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>&#x000A;135:       <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'-'</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>[<span class="ruby-identifier">identifier</span>].<span class="ruby-identifier">to_s</span>&#x000A;136:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000455'>
                <a name='M000455'>      </a>
                <div class='synopsis'>
                  <span class='name'>known_type?</span>
                  <span class='arguments'>(key)</span>
                </div>
                <div class='description'>
                  <p>
                  Is the given <tt>key</tt> a known type of object?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000455-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000455-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 147</span>&#x000A;147:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">known_type?</span>(<span class="ruby-identifier">key</span>)&#x000A;148:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">key</span>&#x000A;149:       <span class="ruby-identifier">key</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_sym</span>&#x000A;150:       <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">ID_MAP</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)&#x000A;151:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000457'>
                <a name='M000457'>      </a>
                <div class='synopsis'>
                  <span class='name'>noid</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='description'>
                  <p>
                  Return a string ID without the identifier. i.e. key-stage-app-root =>
                  stage-app-root
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000457-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000457-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 161</span>&#x000A;161:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">noid</span>(<span class="ruby-identifier">str</span>)&#x000A;162:       <span class="ruby-identifier">el</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'-'</span>)&#x000A;163:       <span class="ruby-identifier">el</span>.<span class="ruby-identifier">shift</span>&#x000A;164:       <span class="ruby-identifier">el</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'-'</span>)&#x000A;165:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000459'>
                <a name='M000459'>      </a>
                <div class='synopsis'>
                  <span class='name'>require_glob</span>
                  <span class='arguments'>(*path)</span>
                </div>
                <div class='description'>
                  <p>
                  <tt>require</tt> a glob of files.
                  </p>
                  <ul>
                  <li><tt>path</tt> is a list of path elements which is sent to File.join
                  
                  </li>
                  </ul>
                  <p>
                  and then to Dir.glob. The list of files found are sent to require. Nothing
                  is returned but LoadError exceptions are caught. The message is printed to
                  STDERR and the program exits with 7.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000459-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000459-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 195</span>&#x000A;195:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_glob</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">path</span>)&#x000A;196:       <span class="ruby-keyword kw">begin</span>&#x000A;197:         <span class="ruby-comment cmt"># TODO: Use autoload</span>&#x000A;198:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">path</span>.<span class="ruby-identifier">flatten</span>)).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>&#x000A;199:           <span class="ruby-identifier">require</span> <span class="ruby-identifier">path</span>&#x000A;200:         <span class="ruby-keyword kw">end</span>&#x000A;201:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">LoadError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;202:         <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Error: #{ex.message}&quot;</span>&#x000A;203:         <span class="ruby-identifier">exit</span> <span class="ruby-value">7</span>&#x000A;204:       <span class="ruby-keyword kw">end</span>&#x000A;205:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000465'>
                <a name='M000465'>      </a>
                <div class='synopsis'>
                  <span class='name'>scp_command</span>
                  <span class='arguments'>(host, keypair, user, paths, to_path, to_local=false, verbose=false, printonly=false)</span>
                </div>
                <div class='description'>
                  <p>
                  (TO BE REMOVED) TODO: This is old and nasty.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000465-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000465-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 289</span>&#x000A;289:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scp_command</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">keypair</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">paths</span>, <span class="ruby-identifier">to_path</span>, <span class="ruby-identifier">to_local</span>=<span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">verbose</span>=<span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">printonly</span>=<span class="ruby-keyword kw">false</span>)&#x000A;290: &#x000A;291:       <span class="ruby-identifier">paths</span> = [<span class="ruby-identifier">paths</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;292:       <span class="ruby-identifier">from_paths</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;293:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">to_local</span>&#x000A;294:         <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>&#x000A;295:           <span class="ruby-identifier">from_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{user}@#{host}:#{path} &quot;</span>&#x000A;296:         <span class="ruby-keyword kw">end</span>  &#x000A;297:         <span class="ruby-comment cmt">#puts &quot;Copying FROM remote TO this machine&quot;, $/</span>&#x000A;298: &#x000A;299:       <span class="ruby-keyword kw">else</span>&#x000A;300:         <span class="ruby-identifier">to_path</span> = <span class="ruby-node">&quot;#{user}@#{host}:#{to_path}&quot;</span>&#x000A;301:         <span class="ruby-identifier">from_paths</span> = <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)&#x000A;302:         <span class="ruby-comment cmt">#puts &quot;Copying FROM this machine TO remote&quot;, $/</span>&#x000A;303:       <span class="ruby-keyword kw">end</span>&#x000A;304: &#x000A;305: &#x000A;306:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;scp -r &quot;</span>&#x000A;307:       <span class="ruby-identifier">cmd</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;-i #{keypair}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">keypair</span>&#x000A;308:       <span class="ruby-identifier">cmd</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{from_paths} #{to_path}&quot;</span>&#x000A;309: &#x000A;310:       <span class="ruby-identifier">puts</span> <span class="ruby-identifier">cmd</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>&#x000A;311:       <span class="ruby-identifier">printonly</span> <span class="ruby-value">? </span>(<span class="ruby-identifier">puts</span> <span class="ruby-identifier">cmd</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">system</span>(<span class="ruby-identifier">cmd</span>)&#x000A;312:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000460'>
                <a name='M000460'>      </a>
                <div class='synopsis'>
                  <span class='name'>service_available?</span>
                  <span class='arguments'>(host, port, wait=3)</span>
                </div>
                <div class='description'>
                  <p>
                  Checks whether something is listening to a socket.
                  </p>
                  <ul>
                  <li><tt>host</tt> A hostname
                  
                  </li>
                  <li><tt>port</tt> The port to check
                  
                  </li>
                  <li><tt>wait</tt> The number of seconds to wait for before timing out.
                  
                  </li>
                  </ul>
                  <p>
                  Returns true if <tt>host</tt> allows a socket connection on <tt>port</tt>.
                  Returns false if one of the following exceptions is raised:
                  Errno::EAFNOSUPPORT, Errno::ECONNREFUSED, SocketError, Timeout::Error
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000460-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000460-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 216</span>&#x000A;216:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">service_available?</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>, <span class="ruby-identifier">wait</span>=<span class="ruby-value">3</span>)&#x000A;217:       <span class="ruby-keyword kw">begin</span>&#x000A;218:         <span class="ruby-identifier">status</span> = <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-identifier">timeout</span>(<span class="ruby-identifier">wait</span>) <span class="ruby-keyword kw">do</span>&#x000A;219:           <span class="ruby-identifier">socket</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">AF_INET</span>, <span class="ruby-constant">SOCK_STREAM</span>, <span class="ruby-value">0</span> )&#x000A;220:           <span class="ruby-identifier">sockaddr</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">pack_sockaddr_in</span>( <span class="ruby-identifier">port</span>, <span class="ruby-identifier">host</span> )&#x000A;221:           <span class="ruby-identifier">socket</span>.<span class="ruby-identifier">connect</span>( <span class="ruby-identifier">sockaddr</span> )&#x000A;222:         <span class="ruby-keyword kw">end</span>&#x000A;223:         <span class="ruby-keyword kw">true</span>&#x000A;224:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EAFNOSUPPORT</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ECONNREFUSED</span>, <span class="ruby-constant">SocketError</span>, <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;225:         <span class="ruby-keyword kw">false</span>&#x000A;226:       <span class="ruby-keyword kw">end</span>&#x000A;227:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000463'>
                <a name='M000463'>      </a>
                <div class='synopsis'>
                  <span class='name'>strand</span>
                  <span class='arguments'>( len=8, safe=true )</span>
                </div>
                <div class='description'>
                  <p>
                  Generates a string of random alphanumeric characters.
                  </p>
                  <ul>
                  <li><tt>len</tt> is the length, an Integer. Default: 8
                  
                  </li>
                  <li><tt>safe</tt> in safe-mode, ambiguous characters are removed (default:
                  true):
                  
                  <pre>i l o 1 0</pre>
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000463-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000463-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 267</span>&#x000A;267:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strand</span>( <span class="ruby-identifier">len</span>=<span class="ruby-value">8</span>, <span class="ruby-identifier">safe</span>=<span class="ruby-keyword kw">true</span> )&#x000A;268:        <span class="ruby-identifier">chars</span> = (<span class="ruby-value str">&quot;a&quot;</span><span class="ruby-operator">..</span><span class="ruby-value str">&quot;z&quot;</span>).<span class="ruby-identifier">to_a</span> <span class="ruby-operator">+</span> (<span class="ruby-value str">&quot;0&quot;</span><span class="ruby-operator">..</span><span class="ruby-value str">&quot;9&quot;</span>).<span class="ruby-identifier">to_a</span>&#x000A;269:        <span class="ruby-identifier">chars</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-node">%w(i l o 1 0)</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">v</span>) } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">safe</span>&#x000A;270:        <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;&quot;</span>&#x000A;271:        <span class="ruby-value">1</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-identifier">len</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">chars</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">chars</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)] }&#x000A;272:        <span class="ruby-identifier">str</span>&#x000A;273:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000450'>
                <a name='M000450'>      </a>
                <div class='synopsis'>
                  <span class='name'>waiter</span>
                  <span class='arguments'>(duration=2, max=120, logger=STDOUT, msg=nil, bells=0, &amp;check)</span>
                </div>
                <div class='description'>
                  <p>
                  Wait for something to happen.
                  </p>
                  <ul>
                  <li><tt>duration</tt> seconds to wait between tries (default: 2).
                  
                  </li>
                  <li><tt>max</tt> maximum time to wait (default: 120). Throws an exception when
                  exceeded.
                  
                  </li>
                  <li><tt>logger</tt> IO object to print <tt>dot</tt> to.
                  
                  </li>
                  <li><tt>msg</tt> the message to print before executing the block.
                  
                  </li>
                  <li><tt>bells</tt> number of terminal bells to ring. Set to nil or false to
                  keep the waiter silent
                  
                  </li>
                  </ul>
                  <p>
                  The <tt>check</tt> block must return false while waiting. Once it returns
                  true the waiter will return true too.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000450-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000450-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 79</span>&#x000A; 79:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">waiter</span>(<span class="ruby-identifier">duration</span>=<span class="ruby-value">2</span>, <span class="ruby-identifier">max</span>=<span class="ruby-value">120</span>, <span class="ruby-identifier">logger</span>=<span class="ruby-constant">STDOUT</span>, <span class="ruby-identifier">msg</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">bells</span>=<span class="ruby-value">0</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">check</span>)&#x000A; 80:       <span class="ruby-comment cmt"># TODO: Move to Drydock. [ed-why?]</span>&#x000A; 81:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;The waiter needs a block!&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">check</span>&#x000A; 82:       <span class="ruby-identifier">duration</span> = <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">duration</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>&#x000A; 83:       <span class="ruby-identifier">max</span> = <span class="ruby-identifier">duration</span><span class="ruby-operator">*</span><span class="ruby-value">2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">max</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">duration</span>&#x000A; 84:       <span class="ruby-identifier">dot</span> = <span class="ruby-value str">'.'</span>&#x000A; 85:       <span class="ruby-keyword kw">begin</span>&#x000A; 86:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">msg</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>&#x000A; 87:           <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">msg</span> &#x000A; 88:           <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">flush</span>&#x000A; 89:         <span class="ruby-keyword kw">end</span>&#x000A; 90:         <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-identifier">timeout</span>(<span class="ruby-identifier">max</span>) <span class="ruby-keyword kw">do</span>&#x000A; 91:           <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span><span class="ruby-identifier">check</span>.<span class="ruby-identifier">call</span>&#x000A; 92:             <span class="ruby-identifier">sleep</span> <span class="ruby-identifier">duration</span>&#x000A; 93:             <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">dot</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:print</span>)&#x000A; 94:             <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">flush</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:flush</span>)&#x000A; 95:           <span class="ruby-keyword kw">end</span>&#x000A; 96:         <span class="ruby-keyword kw">end</span>&#x000A; 97:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A; 98:         <span class="ruby-keyword kw">retry</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Annoy</span>.<span class="ruby-identifier">pose_question</span>(<span class="ruby-value str">&quot; Keep waiting?\a &quot;</span>, <span class="ruby-regexp re">/yes|y|ya|sure|you bet!/i</span>, <span class="ruby-identifier">logger</span>)&#x000A; 99:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>&#x000A;100:       <span class="ruby-keyword kw">end</span>&#x000A;101:       &#x000A;102:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">msg</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">logger</span>&#x000A;103:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; done&quot;</span>&#x000A;104:         <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">flush</span>&#x000A;105:       <span class="ruby-keyword kw">end</span>&#x000A;106:       &#x000A;107:       <span class="ruby-constant">Rudy</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">bell</span>(<span class="ruby-identifier">bells</span>, <span class="ruby-identifier">logger</span>)&#x000A;108:       <span class="ruby-keyword kw">true</span>&#x000A;109:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000464'>
                <a name='M000464'>      </a>
                <div class='synopsis'>
                  <span class='name'>without_indent</span>
                  <span class='arguments'>(str)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns <tt>str</tt> with the leading indentation removed. Stolen from <a
                  href="http://github.com/mynyml/unindent/">github.com/mynyml/unindent/</a>
                  because it was better.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000464-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000464-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 277</span>&#x000A;277:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">without_indent</span>(<span class="ruby-identifier">str</span>)&#x000A;278:       <span class="ruby-identifier">indent</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">$/</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span> }.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp re">/[^\s]/</span>) }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">min</span>&#x000A;279:       <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/^[[:blank:]]{#{indent}}/</span>, <span class="ruby-value str">''</span>)&#x000A;280:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000462'>
                <a name='M000462'>      </a>
                <div class='synopsis'>
                  <span class='name'>write_to_file</span>
                  <span class='arguments'>(filename, content, mode, chmod=600)</span>
                </div>
                <div class='description'>
                  <p>
                  A basic file writer
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000462-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000462-source'>     <span class="ruby-comment cmt"># File lib/rudy/utils.rb, line 252</span>&#x000A;252:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write_to_file</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">content</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">chmod</span>=<span class="ruby-value">600</span>)&#x000A;253:       <span class="ruby-identifier">mode</span> = (<span class="ruby-identifier">mode</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:append</span>) <span class="ruby-operator">?</span> <span class="ruby-value str">'a'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'w'</span>&#x000A;254:       <span class="ruby-identifier">f</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">mode</span>)&#x000A;255:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">content</span>&#x000A;256:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>&#x000A;257:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Rudy</span>.<span class="ruby-identifier">sysinfo</span>.<span class="ruby-identifier">os</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:unix</span>&#x000A;258:       <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Provided chmod is not a Fixnum (#{chmod})&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">chmod</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fixnum</span>)&#x000A;259:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">chmod</span>, <span class="ruby-identifier">filename</span>)&#x000A;260:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
